{
  "provider": "hetzner",
  "domains": [
    "accounts.hetzner.com",
    "hetzner.com"
  ],
  "version": "20230907",
  "type": "browser",
  "steps": [
    {
      "action": "open",
      "url": "https://accounts.hetzner.com/login",
      "description": "Open the login page."
    },
    {
      "action": "type",
      "selector": "#_username",
      "value": "{{ username }}",
      "description": "Insert the username."
    },
    {
      "action": "type",
      "selector": "#_password",
      "value": "{{ password }}",
      "description": "Insert the password."
    },
    {
      "action": "click",
      "selector": "#submit-login",
      "description": "Click login form submit button."
    },
    {
      "action": "waitFor",
      "selector": "#code",
      "description": "Wait for the 2FA code input field.",
      "when": {
        "url": "https://accounts.hetzner.com/login"
      }
    },
    {
      "action": "type",
      "selector": "#code",
      "value": "{{ totp }}",
      "description": "Insert the 2FA code (if required)",
      "when": {
        "url": "https://accounts.hetzner.com/login"
      }
    },
    {
      "action": "sleep",
      "value": "1",
      "description": "Wait for 1 second to avoid 2fa form issues."
    },
    {
      "action": "click",
      "selector": "#root > div > div:nth-child(1) > div > div > div > div > div > form > button",
      "description": "Click 2FA form submit button.",
      "when": {
        "url": "https://cloud.digitalocean.com/login"
      }
    },
    {
      "action": "waitFor",
      "selector": ".avatar-small",
      "description": "Wait for the avatar image"
    },
    {
      "action": "open",
      "url": "https://cloud.digitalocean.com/account/billing",
      "description": "Open the billing page."
    },
    {
      "action": "downloadAll",
      "selector": "#history tbody tr td:nth-child(4) a:nth-child(1)",
      "filterUrlsWith": "https://cloud.digitalocean.com/v2/customers/(.*)/invoices/(.*)/pdf",
      "description": "Click all PDFs links. Only download invoices no payment recipes. This is necessary because the pdf download urls are rendered on the client side and there's no direct link in the html."
    },
    {
      "action": "open",
      "url": "https://cloud.digitalocean.com/logout",
      "description": "Logout from the account."
    }
  ]
},
